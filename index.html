<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="None">
  
  <link rel="shortcut icon" href="img/favicon.ico">
  <title>Home - tnalagmes</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="css/theme.css" type="text/css" />
  <link rel="stylesheet" href="css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Home";
    var mkdocs_page_input_path = "index.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="js/jquery-2.1.1.min.js" defer></script>
  <script src="js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="." class="icon icon-home"> tnalagmes</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="./search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1 current">
		
    <a class="current" href=".">Home</a>
    <ul class="subnav">
            
    <li class="toctree-l2"><a href="#tnalagmes">TNaLaGmes</a></li>
    

    <li class="toctree-l2"><a href="#install">install</a></li>
    

    <li class="toctree-l2"><a href="#usage">Usage</a></li>
    

    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">lang</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="tnalagmes.lang/">lang</a>
                </li>
                <li class="">
                    
    <a class="" href="tnalagmes.lang.format_sv/">format_sv</a>
                </li>
                <li class="">
                    
    <a class="" href="tnalagmes.lang.format_en/">format_en</a>
                </li>
                <li class="">
                    
    <a class="" href="tnalagmes.lang.translate/">translate</a>
                </li>
                <li class="">
                    
    <a class="" href="tnalagmes.lang.format_de/">format_de</a>
                </li>
                <li class="">
                    
    <a class="" href="tnalagmes.lang.format_fr/">format_fr</a>
                </li>
                <li class="">
                    
    <a class="" href="tnalagmes.lang.parse_sv/">parse_sv</a>
                </li>
                <li class="">
                    
    <a class="" href="tnalagmes.lang.format_pt/">format_pt</a>
                </li>
                <li class="">
                    
    <a class="" href="tnalagmes.lang.parse_fr/">parse_fr</a>
                </li>
                <li class="">
                    
    <a class="" href="tnalagmes.lang.parse_en/">parse_en</a>
                </li>
                <li class="">
                    
    <a class="" href="tnalagmes.lang.format_it/">format_it</a>
                </li>
                <li class="">
                    
    <a class="" href="tnalagmes.lang.parse_it/">parse_it</a>
                </li>
                <li class="">
                    
    <a class="" href="tnalagmes.lang.parse_es/">parse_es</a>
                </li>
                <li class="">
                    
    <a class="" href="tnalagmes.lang.parse_common/">parse_common</a>
                </li>
                <li class="">
                    
    <a class="" href="tnalagmes.lang.phonemes_en/">phonemes_en</a>
                </li>
                <li class="">
                    
    <a class="" href="tnalagmes.lang.format_common/">format_common</a>
                </li>
                <li class="">
                    
    <a class="" href="tnalagmes.lang.parse_pt/">parse_pt</a>
                </li>
                <li class="">
                    
    <a class="" href="tnalagmes.lang.parse_de/">parse_de</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">models</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="tnalagmes.models/">models</a>
                </li>
                <li class="">
                    
    <a class="" href="tnalagmes.models.agents/">agents</a>
                </li>
                <li class="">
                    
    <a class="" href="tnalagmes.models.battle/">battle</a>
                </li>
                <li class="">
                    
    <a class="" href="tnalagmes.models.world/">world</a>
                </li>
                <li class="">
                    
    <a class="" href="tnalagmes.models.objects/">objects</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">games</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="tnalagmes.games/">games</a>
                </li>
                <li class="">
                    
    <a class="" href="tnalagmes.games.dummy/">dummy</a>
                </li>
                <li class="">
                    
    <a class="" href="tnalagmes.games.oregon_trail/">oregon_trail</a>
                </li>
                <li class="">
                    
    <a class="" href="tnalagmes.games.zombie/">zombie</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="tnalagmes.constructs/">constructs</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">engines</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="tnalagmes.engines/">engines</a>
                </li>
                <li class="">
                    
    <a class="" href="tnalagmes.engines.textadventurer/">textadventurer</a>
                </li>
                <li class="">
                    
    <a class="" href="tnalagmes.engines.oregon/">oregon</a>
                </li>
                <li class="">
                    
    <a class="" href="tnalagmes.engines.oregon75/">oregon75</a>
                </li>
                <li class="">
                    
    <a class="" href="tnalagmes.engines.textwarrior/">textwarrior</a>
                </li>
                <li class="">
                    
    <a class="" href="tnalagmes.engines.intentworld/">intentworld</a>
                </li>
                <li class="">
                    
    <a class="" href="tnalagmes.engines.oregon78/">oregon78</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">locale</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="tnalagmes.locale/">locale</a>
                </li>
                <li class="">
                    
    <span class="caption-text">en-us</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="tnalagmes.locale.en-us/">en-us</a>
                </li>
    </ul>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">intents</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="tnalagmes.intents/">intents</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">util</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="tnalagmes.util/">util</a>
                </li>
                <li class="">
                    
    <a class="" href="tnalagmes.util.nlp/">nlp</a>
                </li>
                <li class="">
                    
    <a class="" href="tnalagmes.util.phonemes/">phonemes</a>
                </li>
                <li class="">
                    
    <a class="" href="tnalagmes.util.signal/">signal</a>
                </li>
                <li class="">
                    
    <a class="" href="tnalagmes.util.log/">log</a>
                </li>
                <li class="">
                    
    <a class="" href="tnalagmes.util.time/">time</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">data</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="tnalagmes.data/">data</a>
                </li>
                <li class="">
                    
    <a class="" href="tnalagmes.data.template_data/">template_data</a>
                </li>
                <li class="">
                    
    <a class="" href="tnalagmes.data.zombie_survival_data/">zombie_survival_data</a>
                </li>
                <li class="">
                    
    <a class="" href="tnalagmes.data.oregon_trail_data/">oregon_trail_data</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href=".">tnalagmes</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".">Docs</a> &raquo;</li>
    
      
    
    <li>Home</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h2 id="tnalagmes">TNaLaGmes</h2>
<p>TNaLaGmes is a Toolbox for Natural Language Games</p>
<p>I asked myself, what if random python objects could talk to you using only natural language?</p>
<p>TNaLaGmes is a library that provides tools and default models for a variety of constructs, it was made thinking about games, but it really is about text enabling random code constructs!</p>
<p><a href="https://github.com/JarbasAl/TNaLaGmes/wiki">Read the Wiki</a></p>
<p>early alpha version on pip</p>
<h2 id="install">install</h2>
<pre><code>pip install TNaLaGmes
</code></pre>
<h2 id="usage">Usage</h2>
<p>to play the original oregon trail</p>
<pre><code>from tnalagmes.games import OregonTrail

game = OregonTrail()
game.run()
</code></pre>
<p>or maybe you prefer a zombie survival game</p>
<pre><code>from tnalagmes.games.zombie import ZVirus

game = ZVirus()
game.run()
</code></pre>
<p>Chatbot agents are provided via <a href="https://github.com/JarbasAl/all_the_chatbots">all_the_chatbots</a>, you need internet for this</p>
<pre><code>from tnalagmes.models.agents import Mitsuku   # notable chat agents can be imported directly

from tnalagmes.models.agents import ChatAgent  # you can create your own and override on_turn

hitler = ChatAgent.create_agent("hitler")  # get an agent from all_the_chatbots

Mitsuku.run()

# output bellow

&gt; My name is Mitsuku.
hello
&gt; Hi there. How are you?
tell me a joke
&gt; My mates been drinking brake fluid for 6 years but he says he's not addicted. He reckons he can stop anytime he wants.
&gt; Thanks for the information.
do you believe in god?
&gt; &lt;image&gt;http://www.square-bear.co.uk/mitsuku/gallery/god.jpg&lt;/image&gt;
&gt; I believe there is probably something out there but I doubt it is a man with a long beard sat on a throne.
</code></pre>
<p>to do something useful as part of a project look how i made a Calendar</p>
<pre><code>class Calendar(TNaLaGmesConstruct):
    """
    Calendar Object

    "What day/date/week/weekday/month/year is it?"

    "next turn"
    "how many turns left"
    "how many turns passed"
    "how many days per turn"
    "maximum number of turns"

    "increase speed"
    "decrease speed"
    "rollback X days/months/weeks/years"
    "advance X days/months/weeks/years"

    """

    # standard python functionality, implementing date and turn tracking for our calendar
    def __init__(self, total_turns=20, start_date=None, turn_delta=0):
        TNaLaGmesConstruct.__init__(self, "calendar")  # pass a string with object_type if desired
        self._date = start_date or datetime.now()
        self.days_per_turn = turn_delta
        self._turn_delta = timedelta(days=self.days_per_turn) if self.days_per_turn else None
        self._turn_count = 1
        self._max_turns = total_turns

    def change_speed(self, days_per_turn=0):
        if isinstance(days_per_turn, str):
            if days_per_turn.strip().lower().startswith("easy"):
                days_per_turn = 1
            elif days_per_turn.strip().lower().startswith("hard"):
                days_per_turn = 14
            days_per_turn = self.extract_number(days_per_turn)

        self._turn_delta = timedelta(days_per_turn)

    def advance_date(self):
        if self._turn_delta is None:
            self._date = datetime.now()
            return
        self._date += self._turn_delta
        self._turn_count += 1

    def rollback_date(self, rollback_days=None):
        rollback_days = rollback_days or self.days_per_turn
        self._date -= timedelta(days=rollback_days)

    @property
    def weekday(self):
        day = self._date.weekday()
        if day == 0:
            return "Monday"
        elif day == 1:
            return "Tuesday"
        elif day == 2:
            return "Wednesday"
        elif day == 3:
            return "Thursday"
        elif day == 4:
            return "Friday"
        elif day == 5:
            return "Saturday"
        elif day == 6:
            return "Sunday"
        return "What kind of calendar is this? "

    @property
    def pretty_date(self):
        return self.weekday + " " + self._date.strftime('%d, %b %Y')

    @property
    def is_final_turn(self):
        if not self._turn_delta:
            return False
        if self._turn_count &gt;= self._max_turns:
            return True
        else:
            return False

    @property
    def turns(self):
        return self._turn_count

    @property
    def date(self):
        return self._date

    @property
    def max_turns(self):
        return self._max_turns

    @property
    def week_of_month(self):
        # https://en.wikipedia.org/wiki/ISO_week_date#Weeks_per_month
        first_day = self.date.replace(day=1)

        day_of_month = self.date.day

        # adjust for sundays
        if (first_day.weekday() == 6):
            adjusted_dom = (1 + first_day.weekday()) / 7
        else:
            adjusted_dom = day_of_month + first_day.weekday()

        # days may belong to a month but their week may belong to another one
        # weeks belong to a month if its thursday falls on it
        if (first_day.weekday() &gt; 3):
            return int(ceil(adjusted_dom / 7.0)) - 1
        else:
            return int(ceil(adjusted_dom / 7.0))

    # in here register the word triggers
    # im only using keyword rules instead of sample phrases
    # literal strings are used as keywords
    # if available on locale folder vocabulary is expanded
    def register_core_intents(self):
        self.register_keyword_intent("advance",
                                     required=["date", "advance"],
                                     optionals=[],
                                     handler=self.handle_advance)
        self.register_keyword_intent("rollback",
                                     required=["rollback", "date"],
                                     optionals=[],
                                     handler=self.handle_rollback)
        self.register_keyword_intent("speed_decrease",
                                     required=["decrease", "speed"],
                                     optionals=[],
                                     handler=self.handle_speed_decrease)
        self.register_keyword_intent("speed_increase",
                                     required=["increase", "speed"],
                                     optionals=[],
                                     handler=self.handle_speed_increase)
        self.register_keyword_intent("days_per_turn",
                                     required=["turns", "day"],
                                     optionals=["question"],
                                     handler=self.handle_days_per_turn)
        self.register_keyword_intent("turns_max",
                                     required=["turns", "total"],
                                     optionals=["question"],
                                     handler=self.handle_turns_max)
        self.register_keyword_intent("turns_past",
                                     required=["turns", "past"],
                                     optionals=["question"],
                                     handler=self.handle_turns_past)
        self.register_keyword_intent("turns_current",
                                     required=["turns", "current"],
                                     optionals=["question"],
                                     handler=self.handle_turns_current)
        self.register_keyword_intent("turns_left",
                                     required=["turns", "remaining"],
                                     optionals=["question"],
                                     handler=self.handle_turns_left)
        self.register_keyword_intent("next_turn",
                                     required=["next", "turn"],
                                     optionals=[],
                                     handler=self.handle_next_turn)
        self.register_keyword_intent("ask_day",
                                     required=["day"],
                                     optionals=["question"],
                                     handler=self.handle_day)
        self.register_keyword_intent("ask_week",
                                     required=["week"],
                                     optionals=["question"],
                                     handler=self.handle_week)
        self.register_keyword_intent("ask_weekday",
                                     required=["weekday"],
                                     optionals=["question"],
                                     handler=self.handle_weekday)
        self.register_keyword_intent("ask_month",
                                     required=["month"],
                                     optionals=["question"],
                                     handler=self.handle_month)
        self.register_keyword_intent("ask_year",
                                     required=["year"],
                                     optionals=["question"],
                                     handler=self.handle_year)
        self.register_keyword_intent("ask_date",
                                     required=["date"],
                                     optionals=["question"],
                                     handler=self.handle_date)

    # handlers for each natural language questions
    def handle_date(self, intent):
        return self.pretty_date

    def handle_week(self, intent):
        # TODO util to pronounce cardinals
        return "it is the " + str(self.week_of_month) + " week of the month"

    def handle_weekday(self, intent):
        return self.weekday

    def handle_month(self, intent):
        return str(self.date.month)

    def handle_day(self, intent):
        return str(self.date.day)

    def handle_year(self, intent):
        return "it is the year " + str(self.date.year)

    def handle_days_per_turn(self, intent):
        return str(self._turn_delta) + " days per turn"

    def handle_turns_left(self, intent):
        return "you have " + str(self.max_turns - self.turns) + " left"

    def handle_turns_max(self, intent):
        return "maximum number of turns is " + str(self.max_turns)

    def handle_turns_current(self, intent):
        return "currently in turn" + str(self.turns)

    def handle_turns_past(self, intent):
        return str(self.turns - 1) + " passed"

    def handle_next_turn(self, intent):
        self.advance_date()
        return "now in turn" + str(self.turns)

    def handle_advance(self, intent):
        self.advance_date()
        return "advanced date by " + str(self._turn_delta) + " days"

    def handle_rollback(self, intent):
        number = self.extract_number(intent["utterance"])
        self.rollback_date(number)
        return "rolled back date by " + str(number) + " days"

    def handle_speed_decrease(self, intent):
        number = self.extract_number(intent["utterance"])
        number = number or 1
        self.change_speed(self._turn_delta - number)
        return "decreased speed by " + str(number) + " days"

    def handle_speed_increase(self, intent):
        number = self.extract_number(intent["utterance"])
        number = number or 1
        self.change_speed(self._turn_delta - number)
        return "increased speed by " + str(number) + " days"
</code></pre>
<p>you can interact with it now</p>
<pre><code>    if __name__ == "__main__":
        construct = Calendar()
        print(construct.parse_command("current date"))
        print(construct.parse_command("what day"))
        print(construct.parse_command("what month"))
        print(construct.parse_command("what weekday"))
        print(construct.parse_command("total turns"))

    # Saturday 13, Oct 2018
    # 13
    # 10
    # Saturday
    # maximum number of turns is 20
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="tnalagmes.lang/" class="btn btn-neutral float-right" title="lang">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
      
        <span style="margin-left: 15px"><a href="tnalagmes.lang/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '.';</script>
    <script src="js/theme.js" defer></script>
      <script src="search/main.js" defer></script>

</body>
</html>

<!--
MkDocs version : 1.0.4
Build Date UTC : 2018-10-16 09:49:41
-->
